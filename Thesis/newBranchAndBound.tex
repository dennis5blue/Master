\section{Proposed Scheduling Algorithm}
\label{sec::schedulingAlgorithm}
%\begin{figure*}
\begin{figure}
\begin{center}
\includegraphics[width=0.95\columnwidth]{Figures/BBdesignIframeSelection.pdf}
\caption{\label{fig::BBdesgin}Enumeration tree of branch-and-bound algorithm}
\end{center}
\end{figure}
%\end{figure*}
%
\begin{figure}
\begin{center}
\includegraphics[width=0.95\columnwidth]{Figures/referenceStructure.pdf}
\caption{\label{fig::encodeOrder}Coding structure of a group of pictures}
\end{center}
\end{figure}
As we mentioned before, problem~\eqref{eq::formulation} is a $\mathcal{NP}$-hard problem, therefore, we show how to simplify and solve this problem in this chapter.
Note that we assume a P-frame can only reference from one I-frame as illustrated in equation~\eqref{eq::referenceOnlyIframe}.
According to equation~\eqref{eq::referenceOnlyIframe}, the coding structure of a group of pictures can be shown in figure~\ref{fig::encodeOrder}, where every P-frames will reference from the closest previous I-frame to reduce its encoded bits.
Consequently, problem~\eqref{eq::formulation} can be decomposed into two sub-problems, including (a) the I-frame selection sub-problem and (b) the P-frame scheduling sub-problem.
We show in the followings how we solve these two sub-problems.

\subsection{I-frame Selection Sub-Problem}
\label{sec::iFrameSelectionSubProb}
Note that the decision variables of the I-frame selection sub-problem are the diagonal elements of $\mathbf{X}$.
We aim to figure out whether ${x_{ii},i \in V}$ equals to $0$ or $1$ so that the total amount of encoded bits can be minimized, where the other scheduling and overhearing constraints are ignore during the selection of I-frames.
Suppose that camera $i$ is encoded as an I-frame, it is clearly that it requires $H(F_i)$ to encode its image.
However, if camera $i$ is encoded as a P-frame, the amount of encoded bits should depend on which I-frame it references from.
An intuitive method to determine the reference frame is to select the most correlated I-frame and the amount of encoded bits can be written as $\underset{j \in V, x_{jj}=1}{\min} H(F_i|F_j)$.
Therefore, the I-frame selection sub-problem can be written as
\begin{equation*}
\min \left(
\sum_{i=1}^{|V|} x_{ii}H(F_i) +
\sum_{i=1}^{|V|} (1-x_{ii}) \underset{j \in V, x_{jj}=1}{\min} H(F_i|F_j) \right),
\end{equation*}
subject to
\begin{align}
&x_{ii} = \{0,1\}, &\forall i \in V.
\label{eq::IframeSelectionSubProblem}
\end{align}

Since all the decision variables ${x_{ii},i \in V}$ belong to a binary integer, it is clearly that the optimal solution can be found if we search through the feasible set.
That is, the solution set of problem~\eqref{eq::IframeSelectionSubProblem} can be modeled as an enumeration tree.
However, directly traversing the whole tree would lead to very high computational complexity, and hence some policy must be included for reducing the complexity.
One possible method without losing the optimality is through the branch-and-bound (BB) algorithm~\cite{BB} as presented in this chapter.
The main idea of the BB algorithm is that if one sub-tree has no possibility to include the optimal solution, then it is not required to be traversed any more.
Therefore, a proper policy to ``bound'' branches must be well designed for the efficiency of the BB algorithm, and we introduce the ``branching'' and ``bounding'' policy in the followings.
%
\subsubsection{Branching Policy}
The reason why BB algorithm can be applied to solve discrete and combination optimization problems is that the candidate solutions of these problems can be thought of as a rooted tree where the full solutions set is the root of this tree.
The branching phase is thus designed for separating the solution set into several subsets.
For example, as shown in figure~\ref{fig::BBdesgin}, we divide the solution set by fixing some elements of ${x_{ii},i \in V}$.
That is, the left hand side of figure~\ref{fig::BBdesgin} (rooted at $x_{11}=1$) denotes the solution set with camera $1$ is encoded as an I-frame.
The sub-tree of $x_{11}=0, x_{22}=0$ is drawn by dash lines if the optimal solution of problem~\eqref{eq::IframeSelectionSubProblem} cannot be found in this sub-tree (determined by the estimation of lower bound) so that it is not required to be traversed.
The branching phase will keep working until leaf (all variables in $\mathbf{X}$ are determined) or being bounded, where the bounding policy is described in the following subsection.

Although the branching scheme seems trivial (traverse through all the combinations of ${x_{ii},i \in V}$), different branching policy will lead to different converge speed.
For example, if camera $i$ and camera $j$ are high correlated with each other, it is clearly that letting both $x_{ii}$ and $x_{jj}$ equal to $1$ is not a good choice.
Therefore, the branch with $x_{ii}=1$ and $x_{jj}=1$ should have less priority to be traversed.
Due to this reason, we proposed a heuristic approach to determine which branch has the highest priority to be traverse for the sake of getting the optimal solution within few iterations.
The branching metric is thus defined as:
%\begin{equation}
%\frac{1}{|V|-|\tilde{X}^t|+1}+\frac{1}{lb(\tilde{X}^t)}.
%\end{equation}
%
\subsubsection{Lower Bound Estimation}
Before introducing the bounding policy, we first propose an algorithm to estimate the lower bound of total cost at each sub-tree.
To proceed, we denote the cost matrix for the I-frame selection sub-problem as:
\begin{equation}
\mathbf{H} = \left[ \begin{array}{cccc}
h_{11} &h_{12} &\cdots &h_{1|V|} \\
h_{21} &h_{21} &\cdots &h_{2|V|} \\
\vdots &\vdots &\vdots &\vdots \\
h_{|V|1} &h_{|V|2} &\cdots &h_{|V||V|}
\end{array} \right],
\label{eq::bbCostMatrix}
\end{equation}
where ${h_{ij} = H(F_i|F_j)}$ if ${i \neq j}$ and ${h_{ii}=H(F_i)}$.
The cost matrix in~\eqref{eq::bbCostMatrix} will be calculated as a beforehand information so that the lower bound of cost below a branch can be estimated through $\mathbf{H}$.

For an arbitrary branch $t$, suppose that we have a partial determined vector ${\mathbf{X}^t= \{ x_{11}^t,\cdots,x_{|V||V|}^t \} }$, where some ${x_{ii}^t \in \mathbf{X}^t}$ are fixed to either $1$ or $0$ and some ${x_{ii}^t \in \mathbf{X}^t}$ are still undetermined.
We then denote the determined I-frame set at branch $t$ as $\mathcal{I}^t$:
\begin{equation}
\mathcal{I}^t = \{ i \in V | x_{ii}^t = 1 \},
\label{eq::IframeSet}
\end{equation}
where the set of undetermined encoded style cameras at branch $t$ is $V \setminus \mathcal{I}^t$.
Note that ${x_{ii}^t=1}$ means that camera $i$ should be encoded as an I-frame, therefore, it is clearly that the amount of bits required to encoded the image of this camera equals $H(F_i)$.
On the other hand, if ${x_{kk}^t=0}$ or $x_{kk}^t$ has not been determined, camera $k$ has the possibility to encode its image as a P-frame.
As a consequence, the amount of bits required to encode camera $k$'s frame must be smaller than $H(F_k)$.
Since our goal is to find the \emph{lower bound} of required bits, we can thus relaxed the constraints of P-frame reference from an I-frame so that the obtained result will become a weak lower bound.
That is, the cost of P-frame $\underset{j \in V, x_{jj}=1}{\min} H(F_k|F_j)$ now becomes $\underset{j \in V}{\min} H(F_k|F_j)$.
In short, the lower bound estimation procedure of an arbitrary branch $t$  is summarized in algorithm~\ref{alg::lbEstimation}.
%
\IncMargin{1em}
\begin{algorithm}[]
 \SetAlgoLined
 \SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
 \Input{Cameras set $V$ and partial determined I-frame set $\mathcal{I}^t$~\eqref{eq::IframeSet} and cost matrix $\mathbf{H}$~\eqref{eq::bbCostMatrix}}
 \Output{Lower bound $lb^t$ of total amount of encoded bits below branch $t$}
 \BlankLine
 Initialize $lb^t \gets 0$\\
 \For{$i \in \mathcal{I}^t$}
 {
 	$lb^t \gets lb^t + H(F_i)$ \\
 }
 \For{$k \in V \setminus \mathcal{I}^t$}
 {
 	$lb^t \gets lb^t + \underset{j \in V}{\min} H(F_k|F_j)$ \\
 }
 \caption{\label{alg::lbEstimation}Lower bound estimation}
\end{algorithm}
\DecMargin{1em}
%
\subsubsection{Overall Algorithm}
Based on the ideas described in the previous subsections, we can now present how the overall BB algorithm works.
The overall algorithm is now shown in algorithm~\ref{alg::bbAlgorithm}.
\IncMargin{1em}
\begin{algorithm}[]
 \SetAlgoLined
 \SetKwInOut{Input}{Input}\SetKwInOut{Output}{Output}
 \Input{Cameras set $V$ and cost matrix $\mathbf{H}$~\eqref{eq::bbCostMatrix}}
 \Output{Optimal I-frame cameras set}
 \BlankLine
 Initialize best cost = $\infty$, $t \gets 0$\\
 \While{}
 {
 	$t \gets t+1$ \\
  	\eIf{}
  	{
 	}
 	{	
 	}
 }
 \caption{\label{alg::bbAlgorithm}Branch-and-bound scheduling algorithm}
\end{algorithm}
\DecMargin{1em}
%
\subsubsection{Complexity Analysis}
%
%
%
\subsection{P-frame Cameras Scheduling Sub-Problem}
%
\begin{figure}
\begin{center}
\includegraphics[width=0.95\columnwidth]{Figures/referenceStructure2.pdf}
\caption{\label{fig::encodeOrder2}Extended Coding structure of a group of pictures}
\end{center}
\end{figure}
%
As we describe in chapter~\ref{sec::iFrameSelectionSubProb}, the set of cameras that encode their image as an I-frame can be determined through the proposed branch-and-bound algorithm.
Therefore, it is clearly that all the remaining P-frame cameras can decide which camera in the I-frame cameras set is the best one to reference from while encoding their image.
However, the schedule for those P-frame cameras is still undetermined yet, and hence we discuss in this chapter that how to determine the schedule of those P-frame cameras.
For the P-frame cameras scheduling, we extend the coding structure of a group of pictures from figure~\ref{fig::encodeOrder} to figure~\ref{fig::encodeOrder2}.
That is, a P-frame camera can now reference from a previous scheduled I-frame camera or P-frame camera, depends on which one is more correlated.
However, if a P-frame camera $i$ aims to reference from another P-frame camera $j$, camera $i$ must be able to reconstruct the image of camera $j$, which means that camera $i$ also needs to overhear the transmission of the reference frame of camera $j$.
For example, suppose that the coding structure is shown in figure~\ref{fig::encodeOrder2}, camera $4$ must both overhear the transmission of camera $1$ and $3$ if it aims to reference from the image of camera $3$.
%
\begin{equation*}
\underset{\mathbf{X}, \mathbf{Z}}{\min}
\sum_{i=1}^{|V|} \sum_{j \in U_i}  x_{ij} H(F_i|F_j),
\end{equation*}
subject to
\begin{align}
&W_i = \{ j \in V | z_j \leq z_i \}, &\forall i \in V, \nonumber \\
&U_i = \{ j \in W_i | \tau C_{ji} \geq H(F_j) \}, &\forall i \in V, \nonumber \\
&\sum_{j \in U_i} x_{ij} = 1, &\forall i \in V, \nonumber \\
&x_{ii} \text{solved by problem~\eqref{eq::IframeSelectionSubProblem}}, &\forall i \in V, \nonumber \\
&x_{ij} \leq x_{jj}, &\forall i \in V, \forall j \in U_i, \nonumber \\
&x_{ij} = \{0,1\}, &\forall i,j \in V, \nonumber \\
&|z_i - z_j| > 0, &\forall i,j \in V, i \neq j, \nonumber \\
&1 \leq z_i \leq N, &\forall i \in V, z_i \in \mathbb{Z}.
\label{eq::PframeSchedulingSubProblem}
\end{align}